{
	"id": 2,
	"sectionId": 2,
	"content": "import { Service } from '../../../core/index.js';\n\nexport class Tasks extends Service<Tasks> {\n// static task (provisional)\n\tprivate defaultTask = {\n\t\tid: 1,\n\t\tname: 'Default Task',\n\t\tcontent: 'Default task content.',\n\t\tdate: new Date(),\n\t};\n\n\tprivate _tasks: Task[] = [this.defaultTask];\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.registerCleanup(this.clear);\n\t}\n\n// called by parent class on service destruction\n\tprivate clear() {\n\t\tthis._tasks = [];\n\t}\n\n\tprivate sortTasksByDate(): Task[] {\n\t\treturn this._tasks.sort((a, b) => {\n\t\t\tif (new Date(a.date) > new Date(b.date)) return 1;\n\t\t\tif (new Date(a.date) < new Date(b.date)) return -1;\n\t\t\treturn 0;\n\t\t}) \n\t}\n\n\tpublic get tasks() {\n\t\treturn this.sortTasksByDate();\n\t}\n\n}\n\nexport const TasksService = Tasks.getInstance();",
	"type": "ts",
	"en": {
		"before": "Let's generate the TaskService with command `npm run generate service tasks`.\nIt will use a sorting method to return an array of tasks, containing for the moment a single static task.",
		"after": "Inheritance from Service abstract class enforces singleton pattern, implements a registerCleanup method for custom & async cleanup.\nAll services are automatically destroyed when beforeunload window event triggers."
	},
	"fr": {
		"before": "Générons le service TasksService avec la commande `npm run generate service tasks`.\nIl utililsera une fonction de tri pour retourner un tableau de tâches, contenant pour le moment une seule tâche statique.",
		"after": "Les services héritant de la classe abstraite Service utilisent le pattern singleton, implémentent une méthode registerCleanup pour des fonctions de nettoyage personnalisées et asynchrones\nIls sont automatiquement détruits lors de l'évènement window beforeunload."
	}
}