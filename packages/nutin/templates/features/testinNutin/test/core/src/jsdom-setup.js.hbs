import fs from 'fs';
import path from 'path';
import { JSDOM } from 'jsdom';

export function setupJsdomEnvironment(htmlPath = 'dist/src/index.html') {
  const html = fs.readFileSync(path.resolve(process.cwd(), htmlPath), 'utf8');
  const dom = new JSDOM(html, { url: 'http://localhost' });

  global.window = dom.window;
  global.document = dom.window.document;
  global.localStorage = dom.window.localStorage;
}
